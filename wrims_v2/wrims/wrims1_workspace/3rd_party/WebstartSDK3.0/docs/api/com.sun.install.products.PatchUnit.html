<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<!--NewPage-->
<html>
<head>
<!-- Generated by javadoc on Tue Jun 08 15:21:51 PDT 1999 -->
<title>
  Class com.sun.install.products.PatchUnit
</title>
</head>
<body>
<a name="_top_"></a>
<pre>
<a href="packages.html">All Packages</a>  <a href="tree.html">Class Hierarchy</a>  <a href="Package-com.sun.install.products.html">This Package</a>  <a href="com.sun.install.products.LocaleDependency.html#_top_">Previous</a>  <a href="com.sun.install.products.PkgUnit.html#_top_">Next</a>  <a href="AllNames.html">Index</a></pre>
<hr>
<h1>
  Class com.sun.install.products.PatchUnit
</h1>
<pre>
java.lang.Object
   |
   +----<a href="com.sun.install.products.InstallComponent.html#_top_">com.sun.install.products.InstallComponent</a>
           |
           +----<a href="com.sun.install.products.InstallLeaf.html#_top_">com.sun.install.products.InstallLeaf</a>
                   |
                   +----com.sun.install.products.PatchUnit
</pre>
<hr>
<dl>
  <dt> public class <b>PatchUnit</b>
  <dt> extends <a href="com.sun.install.products.InstallLeaf.html#_top_">InstallLeaf</a>
</dl>
PatchUnit is the logical representation of a Solaris "Patch"
 It can be used to apply a patch onto a system.  The underlying
 methods are based on the Solaris <code>patchadd</code> command.  See
 the <em>patchadd(1M)</em> man page for more information on the
 usage.  See the <a href="../SolarisTutorial.html">Solaris Tutorial</a>
 for a complete example of using PatchUnit to install an example product
 using packages.
 <p>
 An object of this type is designed to fit into the <em>product
 tree</em>.  The product tree is a tree-based representation of a
 product.  The tree is traversed during the install and each leaf
 installs the piece of the product that is has been tasked to.  When
 a PatchUnit is encountered in the tree, it will run
 <code>patchadd</code> with the options that are provided in the
 constructor.  
 <p>
 The PatchUnit class should be used in a builder class (one that is a
 subclass of com.sun.wizards.builder.ArchiveWriter).
 <p>
 When PatchUnit installs its underlying package, the only option to
 change is the relative path to the patch, since the patch does not
 actually exist inside the archive itself.
 <p>
<p>
<hr>
<a name="index"></a>
<h2>
  <img src="images/variable-index.gif" width=207 height=38 alt="Variable Index">
</h2>
<dl>
  <dt> <img src="images/blue-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#BUILD_TIME"><b>BUILD_TIME</b></a>
  <dd>  Indicates we should do some preprocessing when this class is used in a builder

  <dt> <img src="images/magenta-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#logOutput"><b>logOutput</b></a>
  <dd>  Flag indicating whether we should collect output from
 <code>patchadd</code> for the log.
<b>Deprecated.</b>
  <dt> <img src="images/blue-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#RUN_TIME"><b>RUN_TIME</b></a>
  <dd>  Indicates we should *not* do some preprocessing at buildtime.
</dl>
<h2>
  <img src="images/constructor-index.gif" width=275 height=38 alt="Constructor Index">
</h2>
<dl>
  <dt> <img src="images/yellow-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#PatchUnit()"><b>PatchUnit</b></a>()
  <dd>  Create a Solaris patch unit 

  <dt> <img src="images/yellow-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#PatchUnit(java.lang.String, java.lang.String)"><b>PatchUnit</b></a>(String, String)
  <dd>  Create a Solaris patch unit with patch location specified 
 by the given relative path and revision level.
  <dt> <img src="images/yellow-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#PatchUnit(java.lang.String, java.lang.String, boolean)"><b>PatchUnit</b></a>(String, String, boolean)
  <dd>  Create a Solaris patch unit with patch location specified 
 by the given relative path, revision level, and whether or not to collect output.
  <dt> <img src="images/yellow-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#PatchUnit(java.lang.String, java.lang.String, boolean, java.util.Hashtable)"><b>PatchUnit</b></a>(String, String, boolean, Hashtable)
  <dd>  Create a Solaris patch unit with patch location specified 
 by the given relative path, the patch version, whether or not to collect output, and the given size information.
  <dt> <img src="images/yellow-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#PatchUnit(java.lang.String, java.lang.String, boolean, int)"><b>PatchUnit</b></a>(String, String, boolean, int)
  <dd>  Create a Solaris patch unit with patch location specified 
 by the given relative path, the patch version, whether or not to collect output, and the given size information.
</dl>
<h2>
  <img src="images/method-index.gif" width=207 height=38 alt="Method Index">
</h2>
<dl>
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#addRuntimeResources(java.util.Vector)"><b>addRuntimeResources</b></a>(Vector)
  <dd>  Add the runtime resources required by this class.
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#initialize(com.sun.wizards.core.WizardState)"><b>initialize</b></a>(WizardState)
  <dd> 
 Initialize this patch unit.
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#install(com.sun.wizards.core.WizardState)"><b>install</b></a>(WizardState)
  <dd>  Install the patch.
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#isInstallable(com.sun.wizards.core.WizardState)"><b>isInstallable</b></a>(WizardState)
  <dd>  Determine if this patch is installable.
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#isUninstallable(com.sun.wizards.core.WizardState)"><b>isUninstallable</b></a>(WizardState)
  <dd>  Determine if this patch is uninstallable.
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#toString()"><b>toString</b></a>()
  <dd>  Represent this object as a string.
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#uninstall(com.sun.wizards.core.WizardState)"><b>uninstall</b></a>(WizardState)
  <dd>  Uninstall the patch.
</dl>
<a name="variables"></a>
<h2>
  <img src="images/variables.gif" width=153 height=38 alt="Variables">
</h2>
<a name="BUILD_TIME"><img src="images/blue-ball.gif" width=12 height=12 alt=" o "></a>
<b>BUILD_TIME</b>
<pre>
 public static final int BUILD_TIME
</pre>
<dl>
  <dd> Indicates we should do some preprocessing when this class is used in a builder<p>
</dl>
<a name="RUN_TIME"><img src="images/blue-ball.gif" width=12 height=12 alt=" o "></a>
<b>RUN_TIME</b>
<pre>
 public static final int RUN_TIME
</pre>
<dl>
  <dd> Indicates we should *not* do some preprocessing at buildtime.<p>
</dl>
<a name="logOutput"><img src="images/magenta-ball.gif" width=12 height=12 alt=" o "></a>
<b>logOutput</b>
<pre>
 protected boolean logOutput
</pre>
<dl>
<dd><b> Note: logOutput is deprecated.</b>
<p>
  <dd> Flag indicating whether we should collect output from
 <code>patchadd</code> for the log.  Sun bugid 4174602: No patch
 log mode is needed for patches such as two SDS patches that start
 a permanent daemon that doesn't redirect or close its standard
 output.  If these PatchUnit's were to use log mode, they would
 wait forever on the daemon's open output file descriptor.<p>
</dl>
<a name="constructors"></a>
<h2>
  <img src="images/constructors.gif" width=231 height=38 alt="Constructors">
</h2>
<a name="PatchUnit"></a>
<a name="PatchUnit()"><img src="images/yellow-ball.gif" width=12 height=12 alt=" o "></a>
<b>PatchUnit</b>
<pre>
 public PatchUnit()
</pre>
<dl>
  <dd> Create a Solaris patch unit
<p>
</dl>
<a name="PatchUnit(java.lang.String, java.lang.String)"><img src="images/yellow-ball.gif" width=12 height=12 alt=" o "></a>
<b>PatchUnit</b>
<pre>
 public PatchUnit(String relativePath,
                  String revision)
</pre>
<dl>
  <dd> Create a Solaris patch unit with patch location specified 
 by the given relative path and revision level.
<p>
  <dd><dl>
    <dt> <b>Parameters:</b>
    <dd> relativePath - The path (relative to the install
				archive) where the package can be found.
    <dd> revision - The patch number+revision, for example "102712-02"
  </dl></dd>
</dl>
<a name="PatchUnit(java.lang.String, java.lang.String, boolean)"><img src="images/yellow-ball.gif" width=12 height=12 alt=" o "></a>
<b>PatchUnit</b>
<pre>
 public PatchUnit(String relativePath,
                  String revision,
                  boolean logOutput)
</pre>
<dl>
  <dd> Create a Solaris patch unit with patch location specified 
 by the given relative path, revision level, and whether or not to collect output.
<p>
  <dd><dl>
    <dt> <b>Parameters:</b>
    <dd> relativePath - The path (relative to the install
				archive) where the package can be found.
    <dd> revision - The patch number+revision, for example "102712-02"
    <dd> logOutput - Log the patch output (true/false)
  </dl></dd>
</dl>
<a name="PatchUnit(java.lang.String, java.lang.String, boolean, int)"><img src="images/yellow-ball.gif" width=12 height=12 alt=" o "></a>
<b>PatchUnit</b>
<pre>
 public PatchUnit(String relativePath,
                  String revision,
                  boolean logOutput,
                  int sizeCheck)
</pre>
<dl>
  <dd> Create a Solaris patch unit with patch location specified 
 by the given relative path, the patch version, whether or not to collect output, and the given size information.
<p>
  <dd><dl>
    <dt> <b>Parameters:</b>
    <dd> relativePath - The path (relative to the install
				archive) where the package can be found.
    <dd> revision - The patch number+revision, for example "102712-02"
    <dd> logOutput - Log the patch output (true/false)
    <dd> destinationTable - A table of the directories and sizes for this patch.
    <dd> sizeCheck - When to calculate the size of this package.
  </dl></dd>
</dl>
<a name="PatchUnit(java.lang.String, java.lang.String, boolean, java.util.Hashtable)"><img src="images/yellow-ball.gif" width=12 height=12 alt=" o "></a>
<b>PatchUnit</b>
<pre>
 public PatchUnit(String relativePath,
                  String revision,
                  boolean log,
                  Hashtable destinationTable)
</pre>
<dl>
  <dd> Create a Solaris patch unit with patch location specified 
 by the given relative path, the patch version, whether or not to collect output, and the given size information.
<p>
  <dd><dl>
    <dt> <b>Parameters:</b>
    <dd> relativePath - The path (relative to the install
				archive) where the package can be found.
    <dd> revision - The patch number+revision, for example "102712-02"
    <dd> log - Log the patch output (true/false)
    <dd> destinationTable - A table of the directories and sizes for this patch.
  </dl></dd>
</dl>
<a name="methods"></a>
<h2>
  <img src="images/methods.gif" width=151 height=38 alt="Methods">
</h2>
<a name="initialize(com.sun.wizards.core.WizardState)"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="initialize"><b>initialize</b></a>
<pre>
 public boolean initialize(<a href="com.sun.wizards.core.WizardState.html#_top_">WizardState</a> state)
</pre>
<dl>
  <dd> Initialize this patch unit. Read the meta files.
 This method reads in the meta-files for the first package in this patch (to determine locale/architecture)
<p>
  <dd><dl>
    <dt> <b>Parameters:</b>
    <dd> wizardState - The wizardstate this component belongs to
    <dt> <b>Returns:</b>
    <dd> true, if this PatchUnit was able to parse its meta files (pkginfo, response, admin), false otherwise.
    <dt> <b>Overrides:</b>
    <dd> <a href="com.sun.install.products.InstallComponent.html#initialize(com.sun.wizards.core.WizardState)">initialize</a> in class <a href="com.sun.install.products.InstallComponent.html#_top_">InstallComponent</a>
  </dl></dd>
</dl>
<a name="install(com.sun.wizards.core.WizardState)"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="install"><b>install</b></a>
<pre>
 public boolean install(<a href="com.sun.wizards.core.WizardState.html#_top_">WizardState</a> state)
</pre>
<dl>
  <dd> Install the patch.  This is the most important method this
 class overrides from InstallLeaf.  This actually does the
 install, and reports the progress by using a ProgressTimer.  It
 runs <code>/usr/sbin/patchadd</code> with no arguments, unless patchadd 
 (for Solaris 2.5.1 systems, or pre-2.5.1).  If patchadd does not
 exist, then the code falls back to using the installpatch script in
 the patch. 
 If patchadd returns a will not be installed status, the install methods
 status is still returns a passing status since patches are self checking
 for current enviornment and multiple patch may be added to normal installs
 with only some expected to match particular environments.  I.E. patches 
 will not be installed if they are already on the system, or if the 
 architecture, OS version, or some other system environment does not match
 the patch's requirements.  The output goes into the system log, if one is 
 being written.
<p>
  <dd><dl>
    <dt> <b>Parameters:</b>
    <dd> state - The runtime wizard state this object belongs to.  Passed
   in from the ProductTask that is driving the install.
    <dt> <b>Returns:</b>
    <dd> true, always.  Even if the patchadd fails, the install will
    continue.
    <dt> <b>Overrides:</b>
    <dd> <a href="com.sun.install.products.InstallComponent.html#install(com.sun.wizards.core.WizardState)">install</a> in class <a href="com.sun.install.products.InstallComponent.html#_top_">InstallComponent</a>
  </dl></dd>
</dl>
<a name="uninstall(com.sun.wizards.core.WizardState)"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="uninstall"><b>uninstall</b></a>
<pre>
 public boolean uninstall(<a href="com.sun.wizards.core.WizardState.html#_top_">WizardState</a> state)
</pre>
<dl>
  <dd> Uninstall the patch.  Checks first to make sure the patch has been applied, then 
 attempts to remove it using <code>patchrm</code> without any arguments other than the
 patch number.
<p>
  <dd><dl>
    <dt> <b>Parameters:</b>
    <dd> state - The runtime wizard state this object belongs to.  Passed
   in from the ProductTask that is driving the install.
    <dt> <b>Returns:</b>
    <dd> true, always.  Even if the patchrm fails, the install will
    continue.
    <dt> <b>Overrides:</b>
    <dd> <a href="com.sun.install.products.InstallComponent.html#uninstall(com.sun.wizards.core.WizardState)">uninstall</a> in class <a href="com.sun.install.products.InstallComponent.html#_top_">InstallComponent</a>
  </dl></dd>
</dl>
<a name="isInstallable(com.sun.wizards.core.WizardState)"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="isInstallable"><b>isInstallable</b></a>
<pre>
 public boolean isInstallable(<a href="com.sun.wizards.core.WizardState.html#_top_">WizardState</a> state)
</pre>
<dl>
  <dd> Determine if this patch is installable.  This does several sanity checks:
 <p>
 <ul>
 <li> Checks for the existence of the <code>installpatch</code> file if this is
      a Solaris 2.6 or previous patch.
 <li> Checks for a compatible runtime platform.
 </ul>
<p>
  <dd><dl>
    <dt> <b>Parameters:</b>
    <dd> state - The wizard state this component belongs to
    <dt> <b>Returns:</b>
    <dd> true, if this is a valid, installable SVR4 package, false otherwise.
  </dl></dd>
</dl>
<a name="isUninstallable(com.sun.wizards.core.WizardState)"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="isUninstallable"><b>isUninstallable</b></a>
<pre>
 public boolean isUninstallable(<a href="com.sun.wizards.core.WizardState.html#_top_">WizardState</a> state)
</pre>
<dl>
  <dd> Determine if this patch is uninstallable.
 Checks to make sure this patch has already been applied and whose information is in <code>/var/sadm/patch/{revision}</code>.
 If it is, this method returns true (i.e. the patch <em>is</em> uninstallable).
<p>
  <dd><dl>
    <dt> <b>Parameters:</b>
    <dd> state - The wizard state this component belongs to
    <dt> <b>Returns:</b>
    <dd> true, if this component is able to be removed, false otherwise
  </dl></dd>
</dl>
<a name="addRuntimeResources(java.util.Vector)"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="addRuntimeResources"><b>addRuntimeResources</b></a>
<pre>
 public void addRuntimeResources(Vector resourceVector)
</pre>
<dl>
  <dd> Add the runtime resources required by this class.
<p>
  <dd><dl>
    <dt> <b>Parameters:</b>
    <dd> resourceVector - The vector containing all of the required resources
                       for this class
    <dt> <b>Overrides:</b>
    <dd> <a href="com.sun.install.products.InstallLeaf.html#addRuntimeResources(java.util.Vector)">addRuntimeResources</a> in class <a href="com.sun.install.products.InstallLeaf.html#_top_">InstallLeaf</a>
  </dl></dd>
</dl>
<a name="toString()"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="toString"><b>toString</b></a>
<pre>
 public String toString()
</pre>
<dl>
  <dd> Represent this object as a string.
<p>
  <dd><dl>
    <dt> <b>Overrides:</b>
    <dd> <a href="com.sun.install.products.InstallComponent.html#toString()">toString</a> in class <a href="com.sun.install.products.InstallComponent.html#_top_">InstallComponent</a>
  </dl></dd>
</dl>
<hr>
<pre>
<a href="packages.html">All Packages</a>  <a href="tree.html">Class Hierarchy</a>  <a href="Package-com.sun.install.products.html">This Package</a>  <a href="com.sun.install.products.LocaleDependency.html#_top_">Previous</a>  <a href="com.sun.install.products.PkgUnit.html#_top_">Next</a>  <a href="AllNames.html">Index</a></pre>
</body>
</html>
