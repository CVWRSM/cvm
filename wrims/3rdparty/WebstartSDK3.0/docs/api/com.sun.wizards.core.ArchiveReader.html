<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<!--NewPage-->
<html>
<head>
<!-- Generated by javadoc on Tue Jun 08 15:21:51 PDT 1999 -->
<title>
  Class com.sun.wizards.core.ArchiveReader
</title>
</head>
<body>
<a name="_top_"></a>
<pre>
<a href="packages.html">All Packages</a>  <a href="tree.html">Class Hierarchy</a>  <a href="Package-com.sun.wizards.core.html">This Package</a>  <a href="Package-com.sun.wizards.core.html">Previous</a>  <a href="com.sun.wizards.core.CommandLineConsole.html#_top_">Next</a>  <a href="AllNames.html">Index</a></pre>
<hr>
<h1>
  Class com.sun.wizards.core.ArchiveReader
</h1>
<pre>
java.lang.Object
   |
   +----com.sun.wizards.core.ArchiveReader
</pre>
<hr>
<dl>
  <dt> public class <b>ArchiveReader</b>
  <dt> extends Object
</dl>
ArchiveReader is responsible for reading the wizard archive 
 and submitting class byte descriptions to the ArchiveClassLoader.
 NOTE:  Any objects created or called from this class must be done
        through reflection.  When this object is created, the class
        loader does not know about all of the classes within the
        archive.  Any use of non-core java classes in this class
        will result in a resolution error when this class is
        created.
<p>
<hr>
<a name="index"></a>
<h2>
  <img src="images/variable-index.gif" width=207 height=38 alt="Variable Index">
</h2>
<dl>
  <dt> <img src="images/magenta-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#offsetTable"><b>offsetTable</b></a>
  <dd>  This is a table used to look up sections in the archive.
  <dt> <img src="images/magenta-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#openStreams"><b>openStreams</b></a>
  <dd>  A lookup table for open streams.
  <dt> <img src="images/blue-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#systemInterface"><b>systemInterface</b></a>
  <dd>  Class to be used at runtime to interact with the underlying
 platform using platform-independent system interface calls.
  <dt> <img src="images/magenta-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#wizardState"><b>wizardState</b></a>
  <dd>  The wizard state is the server side of the wizard.
</dl>
<h2>
  <img src="images/constructor-index.gif" width=275 height=38 alt="Constructor Index">
</h2>
<dl>
  <dt> <img src="images/yellow-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#ArchiveReader(java.lang.Object, java.lang.String, java.lang.Boolean, java.lang.Object)"><b>ArchiveReader</b></a>(Object, String, Boolean, Object)
  <dd>  Creates an ArchiveReader with the specified class loader and
 archive file name.
</dl>
<h2>
  <img src="images/method-index.gif" width=207 height=38 alt="Method Index">
</h2>
<dl>
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#bind(java.lang.Integer)"><b>bind</b></a>(Integer)
  <dd>  Binds the wizardState to the rmi registry.
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#callObjectMethod(java.lang.Object, java.lang.String, java.lang.String[], java.lang.Object[])"><b>callObjectMethod</b></a>(Object, String, String[], Object[])
  <dd>  Call an object method through reflection.
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#cleanup()"><b>cleanup</b></a>()
  <dd>  This method is called before exiting to remove temporary files,
 including the native support.
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#closeNamedResourceStream(java.lang.String)"><b>closeNamedResourceStream</b></a>(String)
  <dd>  Close the stream currently accessing the named resource.
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#createObject(java.lang.String, java.lang.Class[], java.lang.Object[])"><b>createObject</b></a>(String, Class[], Object[])
  <dd>  Create an object through reflection.
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#finalize()"><b>finalize</b></a>()
  <dd>  The finalizer is responsible for deleting temporary files created by this
 object.
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#getArchiveFilename()"><b>getArchiveFilename</b></a>()
  <dd>  Get the archive filename.
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#getArchivePath()"><b>getArchivePath</b></a>()
  <dd>  Get the archive path.
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#getClassLoader()"><b>getClassLoader</b></a>()
  <dd>  Get the class loader being used by this ArchiveReader object.
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#getID()"><b>getID</b></a>()
  <dd>  Retrieves the WizardID of the wizard this ArchiveReader is reading from

  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#getNamedResource(java.lang.String, java.lang.String)"><b>getNamedResource</b></a>(String, String)
  <dd>  This method returns the bytes of the named resource of the
 specified type.
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#getNamedResourceStream(java.lang.String)"><b>getNamedResourceStream</b></a>(String)
  <dd>  This method returns the bytes of the named resource of the
 specified type.
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#getSectionInputStream(java.io.FileInputStream)"><b>getSectionInputStream</b></a>(FileInputStream)
  <dd>  This method returns an input stream for a section in the wizard
 archive.
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#getSectionInputStream(java.io.RandomAccessFile)"><b>getSectionInputStream</b></a>(RandomAccessFile)
  <dd>  This method returns an input stream for a section in the wizard
 archive.
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#getVersion()"><b>getVersion</b></a>()
  <dd>  Retrieves the API version used to build the wizard this ArchiveReader is reading from

  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#getWizardManager()"><b>getWizardManager</b></a>()
  <dd>  Returns the WizardTreeManager.
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#getWizardState()"><b>getWizardState</b></a>()
  <dd>  Get the WizardState object this ArchiveReader is working with.
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#getWizardTree(java.lang.String)"><b>getWizardTree</b></a>(String)
  <dd>  Get the data representing a client subtree.
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#loadOffsetTable()"><b>loadOffsetTable</b></a>()
  <dd>  loadOffsetTable loads the archive offset table from the
 archive.
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#readState()"><b>readState</b></a>()
  <dd> 
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#registerClasses()"><b>registerClasses</b></a>()
  <dd>  This method registers the RuntimeClasses found in the archive with
 the class loader.
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#registerTempFile(java.lang.String)"><b>registerTempFile</b></a>(String)
  <dd>  Register a temporary file that will be removed when the wizard
 exits.
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#removeTempFile(java.lang.String)"><b>removeTempFile</b></a>(String)
  <dd>  Remove the specified temporary file now.
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#writeNativeComponents(java.lang.String)"><b>writeNativeComponents</b></a>(String)
  <dd>  Write the native support for this platform into the specified directory.
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#writeState()"><b>writeState</b></a>()
  <dd>  Writes the statefile for this wizard, and any child wizards present.
</dl>
<a name="variables"></a>
<h2>
  <img src="images/variables.gif" width=153 height=38 alt="Variables">
</h2>
<a name="offsetTable"><img src="images/magenta-ball.gif" width=12 height=12 alt=" o "></a>
<b>offsetTable</b>
<pre>
 protected Hashtable offsetTable
</pre>
<dl>
  <dd> This is a table used to look up sections in the archive.  This table
 contains named offsets.<p>
</dl>
<a name="wizardState"><img src="images/magenta-ball.gif" width=12 height=12 alt=" o "></a>
<b>wizardState</b>
<pre>
 protected Object wizardState
</pre>
<dl>
  <dd> The wizard state is the server side of the wizard.  This object
 is created by the ArchiveReader.<p>
</dl>
<a name="openStreams"><img src="images/magenta-ball.gif" width=12 height=12 alt=" o "></a>
<b>openStreams</b>
<pre>
 protected Hashtable openStreams
</pre>
<dl>
  <dd> A lookup table for open streams.  This table is used
 to identify open streams and close them.<p>
</dl>
<a name="systemInterface"><img src="images/blue-ball.gif" width=12 height=12 alt=" o "></a>
<b>systemInterface</b>
<pre>
 public static <a href="com.sun.wizards.core.SystemInterface.html#_top_">SystemInterface</a> systemInterface
</pre>
<dl>
  <dd> Class to be used at runtime to interact with the underlying
 platform using platform-independent system interface calls.<p>
</dl>
<a name="constructors"></a>
<h2>
  <img src="images/constructors.gif" width=231 height=38 alt="Constructors">
</h2>
<a name="ArchiveReader"></a>
<a name="ArchiveReader(java.lang.Object, java.lang.String, java.lang.Boolean, java.lang.Object)"><img src="images/yellow-ball.gif" width=12 height=12 alt=" o "></a>
<b>ArchiveReader</b>
<pre>
 public ArchiveReader(Object classLoader,
                      String archiveFilename,
                      Boolean startGUI,
                      Object parent)
</pre>
<dl>
  <dd> Creates an ArchiveReader with the specified class loader and
 archive file name.  The archive file name should specify an
 absolute path and filename for the archive file.
<p>
  <dd><dl>
    <dt> <b>Parameters:</b>
    <dd> classLoader - The class loader to be used by this
				ArchiveReader.
    <dd> archiveFilename - The absolute path and filename for
				the archive this reader will read.
    <dd> startGUI - Indicates whether the graphical user
				interface should be started.
    <dd> parent - The WizardState object that is the parent
				of the wizard being instantiated by this
				ArchiveReader object.
  </dl></dd>
</dl>
<a name="methods"></a>
<h2>
  <img src="images/methods.gif" width=151 height=38 alt="Methods">
</h2>
<a name="getVersion()"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="getVersion"><b>getVersion</b></a>
<pre>
 public String getVersion()
</pre>
<dl>
  <dd> Retrieves the API version used to build the wizard this ArchiveReader is reading from
<p>
</dl>
<a name="getID()"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="getID"><b>getID</b></a>
<pre>
 public String getID()
</pre>
<dl>
  <dd> Retrieves the WizardID of the wizard this ArchiveReader is reading from
<p>
</dl>
<a name="writeState()"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="writeState"><b>writeState</b></a>
<pre>
 public void writeState()
</pre>
<dl>
  <dd> Writes the statefile for this wizard, and any child wizards present.
<p>
</dl>
<a name="readState()"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="readState"><b>readState</b></a>
<pre>
 public void readState()
</pre>
<a name="getWizardState()"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="getWizardState"><b>getWizardState</b></a>
<pre>
 public synchronized Object getWizardState()
</pre>
<dl>
  <dd> Get the WizardState object this ArchiveReader is working with.
<p>
  <dd><dl>
    <dt> <b>Returns:</b>
    <dd> The WizardState.
  </dl></dd>
</dl>
<a name="getArchivePath()"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="getArchivePath"><b>getArchivePath</b></a>
<pre>
 public synchronized String getArchivePath()
</pre>
<dl>
  <dd> Get the archive path.
<p>
  <dd><dl>
    <dt> <b>Returns:</b>
    <dd> The path to this archive.
  </dl></dd>
</dl>
<a name="getArchiveFilename()"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="getArchiveFilename"><b>getArchiveFilename</b></a>
<pre>
 public synchronized String getArchiveFilename()
</pre>
<dl>
  <dd> Get the archive filename.
<p>
  <dd><dl>
    <dt> <b>Returns:</b>
    <dd> The filename of this archive, including the path.
  </dl></dd>
</dl>
<a name="getSectionInputStream(java.io.RandomAccessFile)"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="getSectionInputStream"><b>getSectionInputStream</b></a>
<pre>
 public DataInput getSectionInputStream(RandomAccessFile file)
</pre>
<dl>
  <dd> This method returns an input stream for a section in the wizard
 archive.  This method will determine from the archive section if
 compression is being used, and return an appropriate input stream.
<p>
  <dd><dl>
    <dt> <b>Parameters:</b>
    <dd> file - The file, correctly positioned to read the desired
			archive section.
    <dt> <b>Returns:</b>
    <dd> An input stream that can read the archive section.
  </dl></dd>
</dl>
<a name="getSectionInputStream(java.io.FileInputStream)"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="getSectionInputStream"><b>getSectionInputStream</b></a>
<pre>
 public DataInput getSectionInputStream(FileInputStream file)
</pre>
<dl>
  <dd> This method returns an input stream for a section in the wizard
 archive.  This method will determine from the archive section if
 compression is being used, and return an appropriate input stream.
<p>
  <dd><dl>
    <dt> <b>Parameters:</b>
    <dd> file - The file, correctly positioned to read the desired
			archive section.
    <dt> <b>Returns:</b>
    <dd> An input stream that can read the archive section.
  </dl></dd>
</dl>
<a name="getClassLoader()"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="getClassLoader"><b>getClassLoader</b></a>
<pre>
 public synchronized Object getClassLoader()
</pre>
<dl>
  <dd> Get the class loader being used by this ArchiveReader object.
<p>
  <dd><dl>
    <dt> <b>Returns:</b>
    <dd> The class loader.
  </dl></dd>
</dl>
<a name="bind(java.lang.Integer)"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="bind"><b>bind</b></a>
<pre>
 public Boolean bind(Integer rmiPort)
</pre>
<dl>
  <dd> Binds the wizardState to the rmi registry.  The wizardState
 should be a GenericRemoteWizardState.  The only object to 
 call this method is the ArchiveClassLoader, and only if we
 are running remote.  We simply reflect to call into the
 wizardState, which takes care of binding itself.
<p>
  <dd><dl>
    <dt> <b>Parameters:</b>
    <dd> rmiPort - The desired port with which client proxy objects should
		attempt to find exported GenericRemoteWizardStates on.
    <dt> <b>Returns:</b>
    <dd> Whether the binding was successful or not
  </dl></dd>
</dl>
<a name="getNamedResource(java.lang.String, java.lang.String)"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="getNamedResource"><b>getNamedResource</b></a>
<pre>
 public byte[] getNamedResource(String type,
                                String name)
</pre>
<dl>
  <dd> This method returns the bytes of the named resource of the
 specified type.
<p>
  <dd><dl>
    <dt> <b>Parameters:</b>
    <dd> type - The type of resource.
    <dd> name - The name of the resource.
    <dt> <b>Returns:</b>
    <dd> The byte array representing the requested resource.
  </dl></dd>
</dl>
<a name="getNamedResourceStream(java.lang.String)"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="getNamedResourceStream"><b>getNamedResourceStream</b></a>
<pre>
 public <a href="com.sun.wizards.core.ResourceSection.html#_top_">ResourceSection</a> getNamedResourceStream(String name)
</pre>
<dl>
  <dd> This method returns the bytes of the named resource of the
 specified type.
<p>
  <dd><dl>
    <dt> <b>Parameters:</b>
    <dd> name - The name of the resource.
    <dt> <b>Returns:</b>
    <dd> The requested resource section.
  </dl></dd>
</dl>
<a name="closeNamedResourceStream(java.lang.String)"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="closeNamedResourceStream"><b>closeNamedResourceStream</b></a>
<pre>
 public void closeNamedResourceStream(String name)
</pre>
<dl>
  <dd> Close the stream currently accessing the named resource.
<p>
  <dd><dl>
    <dt> <b>Parameters:</b>
    <dd> name - The name of the resource the stream is reading.
  </dl></dd>
</dl>
<a name="registerClasses()"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="registerClasses"><b>registerClasses</b></a>
<pre>
 protected void registerClasses()
</pre>
<dl>
  <dd> This method registers the RuntimeClasses found in the archive with
 the class loader.
<p>
</dl>
<a name="loadOffsetTable()"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="loadOffsetTable"><b>loadOffsetTable</b></a>
<pre>
 public synchronized void loadOffsetTable()
</pre>
<dl>
  <dd> loadOffsetTable loads the archive offset table from the
 archive.
<p>
</dl>
<a name="callObjectMethod(java.lang.Object, java.lang.String, java.lang.String[], java.lang.Object[])"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="callObjectMethod"><b>callObjectMethod</b></a>
<pre>
 public Object callObjectMethod(Object target,
                                String methodName,
                                String argTypes[],
                                Object args[])
</pre>
<dl>
  <dd> Call an object method through reflection.
<p>
  <dd><dl>
    <dt> <b>Parameters:</b>
    <dd> target - The object to call the method on.
    <dd> methodName - The name of the method to call.
    <dd> argTypes - The parameter list identifying the
				correct method.
    <dd> args - The parameters to pass to the method.
    <dt> <b>Returns:</b>
    <dd> The method return value.
  </dl></dd>
</dl>
<a name="createObject(java.lang.String, java.lang.Class[], java.lang.Object[])"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="createObject"><b>createObject</b></a>
<pre>
 public Object createObject(String classname,
                            Class argTypes[],
                            Object args[])
</pre>
<dl>
  <dd> Create an object through reflection.
<p>
  <dd><dl>
    <dt> <b>Parameters:</b>
    <dd> classname - The class name of the object to create.
    <dd> argTypes - The paramater list identifying the correct
				constructor.
    <dd> args - The arguments to pass to the constructor.
    <dt> <b>Returns:</b>
    <dd> The created object.
  </dl></dd>
</dl>
<a name="getWizardTree(java.lang.String)"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="getWizardTree"><b>getWizardTree</b></a>
<pre>
 public synchronized byte[] getWizardTree(String subtreeName)
</pre>
<dl>
  <dd> Get the data representing a client subtree.
<p>
  <dd><dl>
    <dt> <b>Parameters:</b>
    <dd> subtreeName - The name of the subtree, or null
				for the entire client tree.
    <dt> <b>Returns:</b>
    <dd> The data representing the client tree.
  </dl></dd>
</dl>
<a name="writeNativeComponents(java.lang.String)"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="writeNativeComponents"><b>writeNativeComponents</b></a>
<pre>
 public synchronized void writeNativeComponents(String nativeLibDirectory)
</pre>
<dl>
  <dd> Write the native support for this platform into the specified directory.
<p>
  <dd><dl>
    <dt> <b>Parameters:</b>
    <dd> nativeLibDirectory - The directory into which the native support should be written.
  </dl></dd>
</dl>
<a name="registerTempFile(java.lang.String)"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="registerTempFile"><b>registerTempFile</b></a>
<pre>
 public void registerTempFile(String filename)
</pre>
<dl>
  <dd> Register a temporary file that will be removed when the wizard
 exits.
<p>
  <dd><dl>
    <dt> <b>Parameters:</b>
    <dd> filename - The absolute path to the file to be removed.
  </dl></dd>
</dl>
<a name="removeTempFile(java.lang.String)"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="removeTempFile"><b>removeTempFile</b></a>
<pre>
 public void removeTempFile(String filename)
</pre>
<dl>
  <dd> Remove the specified temporary file now.
<p>
  <dd><dl>
    <dt> <b>Parameters:</b>
    <dd> filename - The absolute path to the temporary file to be removed.
  </dl></dd>
</dl>
<a name="getWizardManager()"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="getWizardManager"><b>getWizardManager</b></a>
<pre>
 public Object getWizardManager()
</pre>
<dl>
  <dd> Returns the WizardTreeManager.
<p>
</dl>
<a name="finalize()"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="finalize"><b>finalize</b></a>
<pre>
 protected void finalize() throws Throwable
</pre>
<dl>
  <dd> The finalizer is responsible for deleting temporary files created by this
 object.
<p>
  <dd><dl>
    <dt> <b>Throws:</b> Throwable
    <dd> If there are problems shutting down
     the wizard or deleting any temporary files.
    <dt> <b>Overrides:</b>
    <dd> <a href="java.lang.Object.html#finalize()">finalize</a> in class Object
  </dl></dd>
</dl>
<a name="cleanup()"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="cleanup"><b>cleanup</b></a>
<pre>
 public void cleanup()
</pre>
<dl>
  <dd> This method is called before exiting to remove temporary files,
 including the native support.
<p>
</dl>
<hr>
<pre>
<a href="packages.html">All Packages</a>  <a href="tree.html">Class Hierarchy</a>  <a href="Package-com.sun.wizards.core.html">This Package</a>  <a href="Package-com.sun.wizards.core.html">Previous</a>  <a href="com.sun.wizards.core.CommandLineConsole.html#_top_">Next</a>  <a href="AllNames.html">Index</a></pre>
</body>
</html>
