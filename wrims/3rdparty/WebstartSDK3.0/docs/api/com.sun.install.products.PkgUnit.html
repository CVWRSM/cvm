<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<!--NewPage-->
<html>
<head>
<!-- Generated by javadoc on Tue Jun 08 15:21:51 PDT 1999 -->
<title>
  Class com.sun.install.products.PkgUnit
</title>
</head>
<body>
<a name="_top_"></a>
<pre>
<a href="packages.html">All Packages</a>  <a href="tree.html">Class Hierarchy</a>  <a href="Package-com.sun.install.products.html">This Package</a>  <a href="com.sun.install.products.PatchUnit.html#_top_">Previous</a>  <a href="com.sun.install.products.PlatformDependency.html#_top_">Next</a>  <a href="AllNames.html">Index</a></pre>
<hr>
<h1>
  Class com.sun.install.products.PkgUnit
</h1>
<pre>
java.lang.Object
   |
   +----<a href="com.sun.install.products.InstallComponent.html#_top_">com.sun.install.products.InstallComponent</a>
           |
           +----<a href="com.sun.install.products.InstallLeaf.html#_top_">com.sun.install.products.InstallLeaf</a>
                   |
                   +----com.sun.install.products.PkgUnit
</pre>
<hr>
<dl>
  <dt> public class <b>PkgUnit</b>
  <dt> extends <a href="com.sun.install.products.InstallLeaf.html#_top_">InstallLeaf</a>
</dl>
PkgUnit is the logical representation of a Solaris SVR4 "Package".
 It can be used to install a package onto a system.  The underlying
 methods are based on the Solaris <code>pkgadd</code> command.  See
 the <em>pkgadd(1M)</em> man page for more information on the
 usage.  See the <a href="../SolarisTutorial.html">Solaris Tutorial</a>
 for a complete example of using PkgUnit to install an example product
 using packages.
 <p>
 An object of this type is designed to fit into the <em>product
 tree</em>.  The product tree is a tree-based representation of a
 product.  The tree is traversed during the install and each leaf
 installs the piece of the product that is has been tasked to.  When
 a PkgUnit is encountered in the tree, it will run
 <code>pkgadd</code> with the options that are provided in the
 constructor.  
 <p>
 The PkgUnit class should be configured at build-time.  There are several
 build-time constructors.  All of them take some combination of parameters,
 all of which are described below:
 <p>
 <ul>
 <li>The <em>relative path.</em> At runtime, The wizard looks for
 your packages at the locations you specified at buildtime.  For
 example, you you might specify <code>"../pkgs"</code> as a relative
 path.  Then, at runtime, for the package named
 <code>"SUNWstuf"</code>, the package will be located (via <code>pkgadd -d</code>) using
 <code>"../pkgs/SUNWstuf"</code>.  You supply this information in
 your builder.  
 <p>
 <li>The <em>package name.</em> The package name is name of the SVR4 package
 that this PkgUnit represents.  It is used to programatically access the package,
 and as such should be the same as the top-level directory for the package contents.
 <p>
 <li><em>The "admin" directory.</em> admin is a generic name for
 an ASCII file that defines default installation actions (<code>pkgadd -a</code>) by
 assigning values to installation parameters. For example,
 it allows you to define how to proceed when your package
 being installed already exists on the system.  You can create
 your own admin file to use, use a generic default one, or none
 at all.  The directory specified here is searched for an admin file with the same name
 as the package. 
 <p>
 Several sources are queried in order to construct the final admin contents used
 during the <code>pkgadd</code> invocation.  The process is as follows:
 <p>
 <ul>
 <li>1. The default <code>/var/sadm/install/admin/webstart</code>
   file is read and its contents remebered
 <p>
 <em><strong>-OR-</strong></em> 
 <p>
   if the user specified an alternate admin file via the <code>-a 
   {adminfile} </code> option when invoking the wizard, then this file is read. 
 <p>
 <li>2. If you supplied an admin file using PkgUnit's constructor, then this file is
 then read, and any settings in this file <em><strong>NOT</strong></em> in the previously
 read file from step 1 are inserted.
 <p>
 <li>3. Any settings that have not been set from operations 1 and 2 are set now, using their
 default values:
 <pre>
 mail=
 instance=overwrite
 partial=nocheck
 unlevel=nocheck
 idepend=nocheck
 rdepend=nocheck
 space=nocheck
 setuid=nocheck
 conflict=nocheck
 action=nocheck
 basedir=default
 </pre>
 Note that if the result of steps 1 and 2 result in all of the above settings having a legal
 value, then none of these defaults are used.
 <p>
 <li>4. The result of operations 1, 2, and 3  are stored into the WizardState under the key
 <code>admin.pkgName</code>.  For example, for the package SUNWstuf, the admin file is stored
 under <code>admin.SUNWstuf</code>.  You can retrieve the hashtable representing the admin file
 from a task with the following code:
 <pre>
 Hashtable adminFile = (Hashtable)getTreeManager().callServerObjectMethod(
              getRoute(), "getData", 
		  new String[] {"java.lang.String.class"}, 
		  new Object[] {"admin.{pkgName}"});
 </pre>
 Your panel could then modify its contents based on user input, and reset it back into the WizardState
 for use during <code>pkgadd</code>:
 <pre>
 getTreeManager().callServerObjectMethod(
        getRoute(), "setData",
        new String[] {"java.lang.String.class", "java.lang.Object.class"},
	   new Object[] {"admin.{pkgName}", adminFile});
 </pre>
 The resulting contents are written out to disk and used during <code>pkgadd</code>.
 </ul>
 <p>
 This approach gives precedence to the user (who must be <code>root</code>), the system administrator,
 and the creator of the product (you!), in that order.
 <p>
 <li><em>The "response" file.</em> The response file is generally
 supplied before installation takes place.  The use of this response
 file prevents any interaction from occurring during installation
 since the file already contains all of the information the package
 needs.  Unlike the admin file, if you do not specify a response
 file, then none will be used.  Use this carefully, because if your
 packages require user input, you will need to use a response file
 so you can write this user input into it for your package
 installation to proceed without pausing.
 <p>
 Normally you would supply default values in a response file, and
 then customize these settings during the running of the wizard.
 The customized response file will then be used during package
 installation (<code>pkgadd -r</code>). See the <em>pkgask(1M)</em> man page for details on
 creating the response file.  As with the admin file, the response
 file is available for customization during runtime.  The response
 file is retrievable and editable under the Wizard State data key
 "response.<em>{pkgname}</em>".  For example, for the package named
 "SUNWstuf", the response file could be edited in a panel with the
 following example code:
 <pre>
     //get the response file from the server
       Hashtable response =
        (Hashtable)getTreeManager().callServerObjectMethod(getRoute(),
               "getData",
               new String[] {"java.lang.String.class"},
               new Object[] {"response.SUNWstuf"});
 <br>
     // user input comes from the text field on this panel.
     // change response file based on it.
       response.put("DOCS_DIR", userInputTextField.getText());
<br>
     // set the response file back into the server.
       getTreeManager().callServerObjectMethod(
                getRoute(),
                "setData",
                new String[] {"java.lang.String.class",
                              "java.lang.Object.class"},
                new Object[] {"response.SUNWstuf",
                              response});
 </pre>
 <li><em>Variable names and keys.</em>  Some SVR4 packages can contain <em>parametric variables</em>
 in their configuration files.  These variables must be resolved during installation.  For example, a package's
 <code>pkgmap</code> file might have the following line:
 <pre>
 1 f none $USERDIR/Demo1.java 0600 jhf staff 512000 0 909092253
 </pre>
 The <code>USERDIR</code> variable must exist in the installation environment in order for this variable to be
 resolved.  If you specify a table of these name/key pairs, the keys are used to look up values in the wizard
 state.  If a value is found under a particular key, that value is set into the installation environment as
 <code>NAME=value</code> (by placing this setting in the <em>response file</em>). For example, suppose the 
 above line is in my package's <code>pkgmap</code> file. 
 One of my panels queries the user for this directory and sets the user's answer into the wizard state
 under they wizard state key <code>"USER_SAYS_HERE"</code>.  Then I would want to create my PkgUnit with a 
 hastable as follows:
 <pre>
 Hashtable h = new Hashtable();
 h.put("USERDIR", "USER_SAYS_HERE");
 PkgUnit p = new PkgUnit(..., h, ....);
 </pre>
 This instructs this PkgUnit to put the variable <code>USERDIR</code> into the installation environment, 
 and set it to the value 
 that is stored in the wizard state under the key <code>"USER_SAYS_HERE"</code>.
 <p>
 A special case that occurs is the <code>basedir</code> installation variable.
 A common setting in the admin file is the <code>basedir</code>
 setting.  This setting automatically gets prepended to the
 resulting installation locations for all <em>relocatable</em> files
 in the package during installation (see the <code>pkgadd(1m)</code>
 manpage).  If part or all of your package is relocatable, and you
 want the user to be able to select a different location to install
 to, you would use the following variable hashtable entry to do so:
 <pre>
 h.put("basedir", "USER_SAYS_HERE");
 </pre>
 while making sure a panel sets the user's desired directory under the wizard state key <code>"USER_SAYS_HERE"</code>.
 The setting would then be placed into the admin file (<em>not</em> the response file, as all other variables are) as
 <pre>
 basedir={setting}
 </pre>
 Note that this does not affect non-relocatable files (ones with absolute pathnames in the package's <code>pkgmap</code>). 
 <p>
 <li><em>Automatic and Manual Size Checking</em>.  PkgUnit can preprocess your package if it is available at
 buildtime.  This increases performance at runtime by not having to re-read files off of the filesystem and/or calculate
 sizes.  In order to do this, the package must be located at the same relative location you specified 
 using the <code>relativeDir</code> argument.  There are two settings for the <code>sizeCheck</code> argument:
 <p>
 <ul>
 <li><code>PkgUnit.BUILD_TIME</code> - The necessary files are read and saved in the wizard.  They are never read 
    again.  Sizes are calculated for the package as well.
 <li><code>PkgUnit.RUN_TIME</code> - No preprocessing takes place.  The package does not have to be available 
   at buildtime.
 </ul>
 <p>
 Instead of specifying one of the above settings, a destination table of sizes can be supplied to manually 
 enumerate the size of the package.  This is useful if the locations are fixed and known and will never change.  
 This is not usually used for fully relocatable packages.
 <p>
 For example, suppose my package contained two files named <code>myfile1</code> and <code>myfile2</code>, each
 20k in size, that always 
 installed into <code>/etc</code> and <code>/usr/lib</code>, respectively.  I could create a hashtable and use this for my 
 PkgUnit constructor:
 <pre>
 Hashtable h = new Hashtable();
 h.put("/etc", new Long(20));
 h.put("/usr/lib", new Long(20));
 PkgUnit p = new PkgUnit(..., h, ...);
 </pre>
 The package's <code>pkgmap</code> file is never consulted for size information.
 <p>
 Note that you can specify either manual or automatic size calculations, but not both.
 </ul>
 SVR4 Packages can also be installed using an <em>alternate root</em> (see the <em>pkgadd(1M)</em> manpage for 
 more information).  This is useful when installing an application onto a client machine that gets its root filesystem
 from a remote machine.  Users installing your product can specify this directory when running the wizard.  For example,
 suppose John Q. User wants to install your app onto a client filesystem that existed at /export/root/pronto.  They 
 would execute the wizard as follows:
 <pre>
 # java installWizard -R /export/root/pronto
 </pre>
 This would install the files onto the client filesystem located at /export/root/proto.  <code>pkgadd</code> would also
 update the package database on the client filesystem and any other files it needed to.
 </ul>
<p>
<hr>
<a name="index"></a>
<h2>
  <img src="images/variable-index.gif" width=207 height=38 alt="Variable Index">
</h2>
<dl>
  <dt> <img src="images/blue-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#BUILD_TIME"><b>BUILD_TIME</b></a>
  <dd>  Indicates to PkgUnit that it should calculate its size requirements at build time (i.e.
  <dt> <img src="images/blue-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#DEFAULT_ADMIN"><b>DEFAULT_ADMIN</b></a>
  <dd>  Specifies default rules

  <dt> <img src="images/blue-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#RUN_TIME"><b>RUN_TIME</b></a>
  <dd>  Indicates to PkgUnit that it should calculate its size requirements at run time (i.e.
  <dt> <img src="images/blue-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#SUID_MODE"><b>SUID_MODE</b></a>
  <dd>  Mode mask for an suid file

</dl>
<h2>
  <img src="images/constructor-index.gif" width=275 height=38 alt="Constructor Index">
</h2>
<dl>
  <dt> <img src="images/yellow-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#PkgUnit()"><b>PkgUnit</b></a>()
  <dd>  Create a pkgadd Unit with no parameters.
  <dt> <img src="images/yellow-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#PkgUnit(java.lang.String, java.lang.String)"><b>PkgUnit</b></a>(String, String)
  <dd>  Create a Solaris Package Unit with the given name and path.
  <dt> <img src="images/yellow-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#PkgUnit(java.lang.String, java.lang.String, java.lang.String, java.lang.String)"><b>PkgUnit</b></a>(String, String, String, String)
  <dd>  Create a Solaris Package Unit with the given name,  path, response file directory, and admin file directory.
  <dt> <img src="images/yellow-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#PkgUnit(java.lang.String, java.lang.String, java.lang.String, java.lang.String, java.util.Hashtable)"><b>PkgUnit</b></a>(String, String, String, String, Hashtable)
  <dd>  Create a Solaris Package Unit with the given name,  path, response file directory, admin file directory, 
 and manual size information.
  <dt> <img src="images/yellow-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#PkgUnit(java.lang.String, java.lang.String, java.lang.String, java.lang.String, java.util.Hashtable, java.util.Hashtable)"><b>PkgUnit</b></a>(String, String, String, String, Hashtable, Hashtable)
  <dd>  Create a Solaris Package Unit with the given name, path, response file directory, admin file directory, 
 table of variable/setting pairs, and manual size information.
  <dt> <img src="images/yellow-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#PkgUnit(java.lang.String, java.lang.String, java.lang.String, java.lang.String, java.util.Hashtable, int)"><b>PkgUnit</b></a>(String, String, String, String, Hashtable, int)
  <dd>  Create a Solaris Package Unit with the given name,  path, response file directory, admin file directory, 
 variable/setting values, and preprocessing directive.
</dl>
<h2>
  <img src="images/method-index.gif" width=207 height=38 alt="Method Index">
</h2>
<dl>
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#addRuntimeResources(java.util.Vector)"><b>addRuntimeResources</b></a>(Vector)
  <dd>  Add the runtime resources required by this class.
  <dt> <img src="images/green-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#getDestinationTable(java.util.Hashtable, java.lang.String, java.lang.String)"><b>getDestinationTable</b></a>(Hashtable, String, String)
  <dd>  Creates the destination table out of a pre-processed pathname listing, an alternate
 root, and a directory.
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#getInstallLocation()"><b>getInstallLocation</b></a>()
  <dd>  Form the install location based on the installDirKey and a 
 possible relative path.
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#initialize(com.sun.wizards.core.WizardState)"><b>initialize</b></a>(WizardState)
  <dd>  Initialize this PkgUnit.
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#install(com.sun.wizards.core.WizardState)"><b>install</b></a>(WizardState)
  <dd>  Install (pkgadd) the package.
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#isInstallable(com.sun.wizards.core.WizardState)"><b>isInstallable</b></a>(WizardState)
  <dd>  Determine if this package is installable.
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#isUninstallable(com.sun.wizards.core.WizardState)"><b>isUninstallable</b></a>(WizardState)
  <dd>  Determine if this package is unInstallable.
  <dt> <img src="images/green-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#main(java.lang.String[])"><b>main</b></a>(String[])
  <dd>  Shows size information for a package.
  <dt> <img src="images/green-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#readPkgMap(java.lang.String, java.util.Hashtable)"><b>readPkgMap</b></a>(String, Hashtable)
  <dd>  Reads the pkgmap of an SVR4 package, and returns the resulting 
 table of relative directory names and the total size of all files
 in those directories that are contained in the pkgmap.
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#refresh(java.util.Vector, java.lang.String)"><b>refresh</b></a>(Vector, String)
  <dd> 
 Update this Package.
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#setRunPkgAsk(boolean)"><b>setRunPkgAsk</b></a>(boolean)
  <dd>  Sets a flag that indicates whether or not pkgask should be executed.
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#toString()"><b>toString</b></a>()
  <dd>  Represent this object as a string.
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#uninstall(com.sun.wizards.core.WizardState)"><b>uninstall</b></a>(WizardState)
  <dd>  Uninstall (pkgrm) the package.
</dl>
<a name="variables"></a>
<h2>
  <img src="images/variables.gif" width=153 height=38 alt="Variables">
</h2>
<a name="BUILD_TIME"><img src="images/blue-ball.gif" width=12 height=12 alt=" o "></a>
<b>BUILD_TIME</b>
<pre>
 public static final int BUILD_TIME
</pre>
<dl>
  <dd> Indicates to PkgUnit that it should calculate its size requirements at build time (i.e. when the
 wizard archive is created).<p>
</dl>
<a name="RUN_TIME"><img src="images/blue-ball.gif" width=12 height=12 alt=" o "></a>
<b>RUN_TIME</b>
<pre>
 public static final int RUN_TIME
</pre>
<dl>
  <dd> Indicates to PkgUnit that it should calculate its size requirements at run time (i.e. when the
 wizard archive is executed).  The time it takes for the wizard to run is increased.<p>
</dl>
<a name="DEFAULT_ADMIN"><img src="images/blue-ball.gif" width=12 height=12 alt=" o "></a>
<b>DEFAULT_ADMIN</b>
<pre>
 public static final String DEFAULT_ADMIN
</pre>
<dl>
  <dd> Specifies default rules<p>
</dl>
<a name="SUID_MODE"><img src="images/blue-ball.gif" width=12 height=12 alt=" o "></a>
<b>SUID_MODE</b>
<pre>
 public static final int SUID_MODE
</pre>
<dl>
  <dd> Mode mask for an suid file<p>
</dl>
<a name="constructors"></a>
<h2>
  <img src="images/constructors.gif" width=231 height=38 alt="Constructors">
</h2>
<a name="PkgUnit"></a>
<a name="PkgUnit()"><img src="images/yellow-ball.gif" width=12 height=12 alt=" o "></a>
<b>PkgUnit</b>
<pre>
 public PkgUnit()
</pre>
<dl>
  <dd> Create a pkgadd Unit with no parameters.  Not very useful.  Must exist for
 serialization of an object of this type.
<p>
</dl>
<a name="PkgUnit(java.lang.String, java.lang.String)"><img src="images/yellow-ball.gif" width=12 height=12 alt=" o "></a>
<b>PkgUnit</b>
<pre>
 public PkgUnit(String relativePath,
                String pkgName)
</pre>
<dl>
  <dd> Create a Solaris Package Unit with the given name and path.  No response file is used, the default admin files
 are used, and the sizes are calculated at runtime. See <a href="com.sun.install.products.PkgUnit.html#_top_">
 the top of this document</a> for more information.
<p>
  <dd><dl>
    <dt> <b>Parameters:</b>
    <dd> relativePath - The path to find the package at build/runtime
    <dd> pkgName - The name of the package.
  </dl></dd>
</dl>
<a name="PkgUnit(java.lang.String, java.lang.String, java.lang.String, java.lang.String)"><img src="images/yellow-ball.gif" width=12 height=12 alt=" o "></a>
<b>PkgUnit</b>
<pre>
 public PkgUnit(String relativePath,
                String pkgName,
                String adminDir,
                String responseDir)
</pre>
<dl>
  <dd> Create a Solaris Package Unit with the given name,  path, response file directory, and admin file directory.
 The package sizes are calculated at runtime. See <a href="com.sun.install.products.PkgUnit.html#_top_">
 the top of this document</a> for more information.
<p>
  <dd><dl>
    <dt> <b>Parameters:</b>
    <dd> relativePath - The path to find the package at build/runtime
    <dd> pkgName - The name of the package.
    <dd> adminDir - The relative directory where the admin file for this package lives.
    <dd> responseDir - The relative directory where the response file for this package lives.
  </dl></dd>
</dl>
<a name="PkgUnit(java.lang.String, java.lang.String, java.lang.String, java.lang.String, java.util.Hashtable, int)"><img src="images/yellow-ball.gif" width=12 height=12 alt=" o "></a>
<b>PkgUnit</b>
<pre>
 public PkgUnit(String relativePath,
                String pkgName,
                String adminDir,
                String responseDir,
                Hashtable variables,
                int sizeCheck)
</pre>
<dl>
  <dd> Create a Solaris Package Unit with the given name,  path, response file directory, admin file directory, 
 variable/setting values, and preprocessing directive. See 
 <a href="com.sun.install.products.PkgUnit.html#_top_">
 the top of this document</a> for more information.
<p>
  <dd><dl>
    <dt> <b>Parameters:</b>
    <dd> relativePath - The path to find the package at build/runtime
    <dd> pkgName - The name of the package.
    <dd> adminDir - The relative directory where the admin file for this package lives.
    <dd> responseDir - The relative directory where the response file for this package lives.
    <dd> variables - A table of variable name/key settings.  Each key is looked up in the WizardState, and if a
   value is found, that value is set into the installation environment using the corresponding variable name.
   from the table.
    <dd> sizeCheck - When to gather size information for this package.
  </dl></dd>
</dl>
<a name="PkgUnit(java.lang.String, java.lang.String, java.lang.String, java.lang.String, java.util.Hashtable)"><img src="images/yellow-ball.gif" width=12 height=12 alt=" o "></a>
<b>PkgUnit</b>
<pre>
 public PkgUnit(String relativePath,
                String pkgName,
                String adminDir,
                String responseDir,
                Hashtable destinationTable)
</pre>
<dl>
  <dd> Create a Solaris Package Unit with the given name,  path, response file directory, admin file directory, 
 and manual size information.  See
 <a href="com.sun.install.products.PkgUnit.html#_top_">
 the top of this document</a> for more information.
<p>
  <dd><dl>
    <dt> <b>Parameters:</b>
    <dd> relativePath - The path to find the package at build/runtime
    <dd> pkgName - The name of the package.
    <dd> adminDir - The relative directory where the admin file for this package lives.
    <dd> responseDir - The relative directory where the response file for this package lives.
    <dd> destinationTable - a table of hard-coded destinations for this package.
  </dl></dd>
</dl>
<a name="PkgUnit(java.lang.String, java.lang.String, java.lang.String, java.lang.String, java.util.Hashtable, java.util.Hashtable)"><img src="images/yellow-ball.gif" width=12 height=12 alt=" o "></a>
<b>PkgUnit</b>
<pre>
 public PkgUnit(String relativePath,
                String pkgName,
                String adminDir,
                String responseDir,
                Hashtable variables,
                Hashtable destinationTable)
</pre>
<dl>
  <dd> Create a Solaris Package Unit with the given name, path, response file directory, admin file directory, 
 table of variable/setting pairs, and manual size information.
 <a href="com.sun.install.products.PkgUnit.html#_top_">
 the top of this document</a> for more information.
<p>
  <dd><dl>
    <dt> <b>Parameters:</b>
    <dd> relativePath - The path to find the package at build/runtime
    <dd> pkgName - The name of the package.
    <dd> adminDir - The relative directory where the admin file for this package lives.
    <dd> responseDir - The relative directory where the response file for this package lives.
    <dd> variables - A table of variable name/key settings.  Each key is looked up in the WizardState, and if a
   value is found, that value is set into the installation environment using the corresponding variable name.
   from the table.
    <dd> destinationTable - a table of hard-coded destinations for this package.
  </dl></dd>
</dl>
<a name="methods"></a>
<h2>
  <img src="images/methods.gif" width=151 height=38 alt="Methods">
</h2>
<a name="setRunPkgAsk(boolean)"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="setRunPkgAsk"><b>setRunPkgAsk</b></a>
<pre>
 public void setRunPkgAsk(boolean runPkgAsk)
</pre>
<dl>
  <dd> Sets a flag that indicates whether or not pkgask should be executed.
<p>
  <dd><dl>
    <dt> <b>Parameters:</b>
    <dd> runPkgAsk - If true, pkgask will be executed.
  </dl></dd>
</dl>
<a name="getInstallLocation()"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="getInstallLocation"><b>getInstallLocation</b></a>
<pre>
 public String getInstallLocation()
</pre>
<dl>
  <dd> Form the install location based on the installDirKey and a 
 possible relative path.  Althernate root is not considered in this method.
<p>
  <dd><dl>
    <dt> <b>Returns:</b>
    <dd> The location this FileUnit will install to
    <dt> <b>Overrides:</b>
    <dd> <a href="com.sun.install.products.InstallComponent.html#getInstallLocation()">getInstallLocation</a> in class <a href="com.sun.install.products.InstallComponent.html#_top_">InstallComponent</a>
  </dl></dd>
</dl>
<a name="install(com.sun.wizards.core.WizardState)"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="install"><b>install</b></a>
<pre>
 public boolean install(<a href="com.sun.wizards.core.WizardState.html#_top_">WizardState</a> state)
</pre>
<dl>
  <dd> Install (pkgadd) the package.
 This is the most important method this class overrides from
 InstallLeaf.  This actually does the install, and reports the
 progress by using a ProgressTimer.  It first lays down the admin
 and response files into the system temporary directory, and then
 executes <code>pkgadd</code> with the appropriate parameters.
<p>
  <dd><dl>
    <dt> <b>Parameters:</b>
    <dd> state - The wizard state this component belongs to
    <dt> <b>Returns:</b>
    <dd> true, if the installation was sucessful, false otherwise
    <dt> <b>Overrides:</b>
    <dd> <a href="com.sun.install.products.InstallComponent.html#install(com.sun.wizards.core.WizardState)">install</a> in class <a href="com.sun.install.products.InstallComponent.html#_top_">InstallComponent</a>
  </dl></dd>
</dl>
<a name="uninstall(com.sun.wizards.core.WizardState)"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="uninstall"><b>uninstall</b></a>
<pre>
 public boolean uninstall(<a href="com.sun.wizards.core.WizardState.html#_top_">WizardState</a> state)
</pre>
<dl>
  <dd> Uninstall (pkgrm) the package.
 The same admin file is used as was used during install.  In
 addition, the <em>-n</em> flag is passed to <code>pkgrm</code> to avoid
 interaction.  The package is first checked using <code>pkginfo</code>
 to verify its existance.
<p>
  <dd><dl>
    <dt> <b>Parameters:</b>
    <dd> state - The wizard state this component belongs to
    <dt> <b>Returns:</b>
    <dd> true if the removal of this package was sucessful, false otherwise
    <dt> <b>Overrides:</b>
    <dd> <a href="com.sun.install.products.InstallComponent.html#uninstall(com.sun.wizards.core.WizardState)">uninstall</a> in class <a href="com.sun.install.products.InstallComponent.html#_top_">InstallComponent</a>
  </dl></dd>
</dl>
<a name="isInstallable(com.sun.wizards.core.WizardState)"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="isInstallable"><b>isInstallable</b></a>
<pre>
 public boolean isInstallable(<a href="com.sun.wizards.core.WizardState.html#_top_">WizardState</a> state)
</pre>
<dl>
  <dd> Determine if this package is installable.  Several sanity checks are run here:
 <p>
 <ul>
 <li>Relative path is valid
 <li>A valid <code>pkginfo</code> file can be found
 </ul>
<p>
  <dd><dl>
    <dt> <b>Parameters:</b>
    <dd> state - The wizard state this component belongs to
    <dt> <b>Returns:</b>
    <dd> true, if this is a valid, installable SVR4 package, false otherwise.
  </dl></dd>
</dl>
<a name="isUninstallable(com.sun.wizards.core.WizardState)"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="isUninstallable"><b>isUninstallable</b></a>
<pre>
 public boolean isUninstallable(<a href="com.sun.wizards.core.WizardState.html#_top_">WizardState</a> state)
</pre>
<dl>
  <dd> Determine if this package is unInstallable.
 Until uninstall is implemented, this method always returns <code>false</code>
<p>
  <dd><dl>
    <dt> <b>Parameters:</b>
    <dd> state - The wizard state this component belongs to
    <dt> <b>Returns:</b>
    <dd> true, if this component is able to be removed, false otherwise
  </dl></dd>
</dl>
<a name="toString()"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="toString"><b>toString</b></a>
<pre>
 public String toString()
</pre>
<dl>
  <dd> Represent this object as a string.
<p>
  <dd><dl>
    <dt> <b>Returns:</b>
    <dd> A textual representation of this component, consisting of it's name
    and runtime install destination.
    <dt> <b>Overrides:</b>
    <dd> <a href="com.sun.install.products.InstallComponent.html#toString()">toString</a> in class <a href="com.sun.install.products.InstallComponent.html#_top_">InstallComponent</a>
  </dl></dd>
</dl>
<a name="initialize(com.sun.wizards.core.WizardState)"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="initialize"><b>initialize</b></a>
<pre>
 public boolean initialize(<a href="com.sun.wizards.core.WizardState.html#_top_">WizardState</a> state)
</pre>
<dl>
  <dd> Initialize this PkgUnit.  This method reads in the meta-files for
 this package (admin, response files) and parses them.  It also
 collects locale and architecture information about the package.
<p>
  <dd><dl>
    <dt> <b>Parameters:</b>
    <dd> wizardState - The wizardstate this component belongs to
    <dt> <b>Returns:</b>
    <dd> true, if this PkgUnit was able to parse its meta files
    (pkginfo, response, admin), false otherwise.
    <dt> <b>Overrides:</b>
    <dd> <a href="com.sun.install.products.InstallComponent.html#initialize(com.sun.wizards.core.WizardState)">initialize</a> in class <a href="com.sun.install.products.InstallComponent.html#_top_">InstallComponent</a>
  </dl></dd>
</dl>
<a name="refresh(java.util.Vector, java.lang.String)"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="refresh"><b>refresh</b></a>
<pre>
 public boolean refresh(Vector targets,
                        String sharedPoolKey)
</pre>
<dl>
  <dd> Update this Package.  For the PkgUNit, the pkgmap is re-read and size
 re-calculated based on any new directory information.
<p>
  <dd><dl>
    <dt> <b>Parameters:</b>
    <dd> targets - The target properties (set via <code>setProperty()</code>) to update.
    <dd> sharedPoolKey - The key to use during the shared pool verification.
    <dt> <b>Returns:</b>
    <dd> <code>true</code> if the refresh was sucessful, <code>false</code>otherwise.
    <dt> <b>Overrides:</b>
    <dd> <a href="com.sun.install.products.InstallComponent.html#refresh(java.util.Vector, java.lang.String)">refresh</a> in class <a href="com.sun.install.products.InstallComponent.html#_top_">InstallComponent</a>
  </dl></dd>
</dl>
<a name="getDestinationTable(java.util.Hashtable, java.lang.String, java.lang.String)"><img src="images/green-ball.gif" width=12 height=12 alt=" o "></a>
<a name="getDestinationTable"><b>getDestinationTable</b></a>
<pre>
 public static Hashtable getDestinationTable(Hashtable sizeTable,
                                             String alternateRoot,
                                             String newDirectory)
</pre>
<dl>
  <dd> Creates the destination table out of a pre-processed pathname listing, an alternate
 root, and a directory.
<p>
  <dd><dl>
    <dt> <b>Parameters:</b>
    <dd> sizeTable - the pre-processed table of directories and their sizes, in Longs.  The table
   can contain both relative and absolute pathnames/
    <dd> alternateRoot - The directory to prepend to all entries in the table, whether the entries
   are relative or absolute.
    <dd> newDirectory - The direcectory to prepend to the relative paths that are present in the table.
    <dt> <b>Returns:</b>
    <dd> The new table of processed pathnames and sizes.
  </dl></dd>
</dl>
<a name="readPkgMap(java.lang.String, java.util.Hashtable)"><img src="images/green-ball.gif" width=12 height=12 alt=" o "></a>
<a name="readPkgMap"><b>readPkgMap</b></a>
<pre>
 public static Hashtable readPkgMap(String path,
                                    Hashtable env)
</pre>
<dl>
  <dd> Reads the pkgmap of an SVR4 package, and returns the resulting 
 table of relative directory names and the total size of all files
 in those directories that are contained in the pkgmap.
<p>
  <dd><dl>
    <dt> <b>Parameters:</b>
    <dd> path - The full path to the pkgmap file to read
    <dd> env - The environment to resolve variables from.  If a pkgmap entry
   has a parametric variable, this environment is searched to resolve the
   variable, recursively.
    <dt> <b>Returns:</b>
    <dd> The resulting table of relative and absolute paths, along with the
    size (in a Long) representing the total of all files to be placed in
    that directory.
  </dl></dd>
</dl>
<a name="addRuntimeResources(java.util.Vector)"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="addRuntimeResources"><b>addRuntimeResources</b></a>
<pre>
 public void addRuntimeResources(Vector resourceVector)
</pre>
<dl>
  <dd> Add the runtime resources required by this class.
<p>
  <dd><dl>
    <dt> <b>Parameters:</b>
    <dd> resourceVector - The vector containing all of the required resources
                       for this class
    <dt> <b>Overrides:</b>
    <dd> <a href="com.sun.install.products.InstallLeaf.html#addRuntimeResources(java.util.Vector)">addRuntimeResources</a> in class <a href="com.sun.install.products.InstallLeaf.html#_top_">InstallLeaf</a>
  </dl></dd>
</dl>
<a name="main(java.lang.String[])"><img src="images/green-ball.gif" width=12 height=12 alt=" o "></a>
<a name="main"><b>main</b></a>
<pre>
 public static void main(String args[])
</pre>
<dl>
  <dd> Shows size information for a package. 
 <p>
 usage: java PkgUnit <path to pacakge>
<p>
  <dd><dl>
    <dt> <b>Parameters:</b>
    <dd> args - The arguments to the class
  </dl></dd>
</dl>
<hr>
<pre>
<a href="packages.html">All Packages</a>  <a href="tree.html">Class Hierarchy</a>  <a href="Package-com.sun.install.products.html">This Package</a>  <a href="com.sun.install.products.PatchUnit.html#_top_">Previous</a>  <a href="com.sun.install.products.PlatformDependency.html#_top_">Next</a>  <a href="AllNames.html">Index</a></pre>
</body>
</html>
