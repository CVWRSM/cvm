<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<!--NewPage-->
<html>
<head>
<!-- Generated by javadoc on Tue Jun 08 15:21:51 PDT 1999 -->
<title>
  Class com.sun.install.products.FileUnit
</title>
</head>
<body>
<a name="_top_"></a>
<pre>
<a href="packages.html">All Packages</a>  <a href="tree.html">Class Hierarchy</a>  <a href="Package-com.sun.install.products.html">This Package</a>  <a href="com.sun.install.products.FileServerObject.html#_top_">Previous</a>  <a href="com.sun.install.products.InstallArchiveWriter.html#_top_">Next</a>  <a href="AllNames.html">Index</a></pre>
<hr>
<h1>
  Class com.sun.install.products.FileUnit
</h1>
<pre>
java.lang.Object
   |
   +----<a href="com.sun.install.products.InstallComponent.html#_top_">com.sun.install.products.InstallComponent</a>
           |
           +----<a href="com.sun.install.products.InstallLeaf.html#_top_">com.sun.install.products.InstallLeaf</a>
                   |
                   +----com.sun.install.products.FileUnit
</pre>
<hr>
<dl>
  <dt> public class <b>FileUnit</b>
  <dt> extends <a href="com.sun.install.products.InstallLeaf.html#_top_">InstallLeaf</a>
  <dt> implements <a href="com.sun.wizards.builder.resolver.ResourceResolver.html#_top_">ResourceResolver</a>
</dl>
The FileUnit is able to install files directly from the wizard
 archive.  FileUnit is also able to remove the files at uninstall
 time, provided the files appear in the current directory.
<p>
<hr>
<a name="index"></a>
<h2>
  <img src="images/variable-index.gif" width=207 height=38 alt="Variable Index">
</h2>
<dl>
  <dt> <img src="images/magenta-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#resourceName"><b>resourceName</b></a>
  <dd>  The resource name is the key used on the archive to get a
 stream containing files to be installed by this unit.
</dl>
<h2>
  <img src="images/constructor-index.gif" width=275 height=38 alt="Constructor Index">
</h2>
<dl>
  <dt> <img src="images/yellow-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#FileUnit()"><b>FileUnit</b></a>()
  <dd>  Create a FileUnit.
  <dt> <img src="images/yellow-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#FileUnit(java.lang.String)"><b>FileUnit</b></a>(String)
  <dd>  Create a FileUnit that reads from the specified resource
 section in the archive.
  <dt> <img src="images/yellow-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#FileUnit(java.lang.String, java.lang.String, java.lang.String)"><b>FileUnit</b></a>(String, String, String)
  <dd>  Create a FileUnit that reads from the specified resource
 section in the archive, which installs to the specified
 relative path offset from the directory specified by the
 installDirKey value.
</dl>
<h2>
  <img src="images/method-index.gif" width=207 height=38 alt="Method Index">
</h2>
<dl>
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#addFile(java.lang.String, java.lang.String, java.util.Hashtable)"><b>addFile</b></a>(String, String, Hashtable)
  <dd>  Adds the specified file or directory to the resource.
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#addRuntimeResources(java.util.Vector)"><b>addRuntimeResources</b></a>(Vector)
  <dd>  Add the runtime resources required by this class.
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#getCollection()"><b>getCollection</b></a>()
  <dd>  Retrieves the vector of files this unit will write into the archive, along
 with each file's attributes.
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#getComponentDescription()"><b>getComponentDescription</b></a>()
  <dd>  Gets the component's description.
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#getInstallLocation()"><b>getInstallLocation</b></a>()
  <dd>  Form the install location based on the installDirKey and a 
 possible relative path.
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#initialize(com.sun.wizards.core.WizardState)"><b>initialize</b></a>(WizardState)
  <dd>  Initialize the FileUnit by removing the alternate root.
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#install(com.sun.wizards.core.WizardState)"><b>install</b></a>(WizardState)
  <dd>  Install the files that are embedded in the wizard archive.
  <dt> <img src="images/green-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#mkdirs(java.util.Vector, java.io.File)"><b>mkdirs</b></a>(Vector, File)
  <dd>  Recursively makes directories, registering each directory with the supplied vector so that it
 gets removed at uninstall time.
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#readDestinationTable()"><b>readDestinationTable</b></a>()
  <dd>  sets the destination table that is used for disk space checking.
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#refresh(java.util.Vector, java.lang.String)"><b>refresh</b></a>(Vector, String)
  <dd> 
 Update this  file.
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#resolveResource(java.lang.String, java.lang.String, byte[])"><b>resolveResource</b></a>(String, String, byte[])
  <dd> 
 This method resolves the resources required by this FileUnit.
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#setFileTable(java.util.Vector)"><b>setFileTable</b></a>(Vector)
  <dd>  Sets the table of files to be written into the archive at buildtime.
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#toString()"><b>toString</b></a>()
  <dd>  Represent this object as a string.
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#uninstall(com.sun.wizards.core.WizardState)"><b>uninstall</b></a>(WizardState)
  <dd>  Uninstall this Leaf.
</dl>
<a name="variables"></a>
<h2>
  <img src="images/variables.gif" width=153 height=38 alt="Variables">
</h2>
<a name="resourceName"><img src="images/magenta-ball.gif" width=12 height=12 alt=" o "></a>
<b>resourceName</b>
<pre>
 protected String resourceName
</pre>
<dl>
  <dd> The resource name is the key used on the archive to get a
 stream containing files to be installed by this unit.<p>
</dl>
<a name="constructors"></a>
<h2>
  <img src="images/constructors.gif" width=231 height=38 alt="Constructors">
</h2>
<a name="FileUnit"></a>
<a name="FileUnit()"><img src="images/yellow-ball.gif" width=12 height=12 alt=" o "></a>
<b>FileUnit</b>
<pre>
 public FileUnit()
</pre>
<dl>
  <dd> Create a FileUnit.
<p>
</dl>
<a name="FileUnit(java.lang.String)"><img src="images/yellow-ball.gif" width=12 height=12 alt=" o "></a>
<b>FileUnit</b>
<pre>
 public FileUnit(String resourceName)
</pre>
<dl>
  <dd> Create a FileUnit that reads from the specified resource
 section in the archive.  The files will be installed and
 removed from the directory chosen by the user.
<p>
  <dd><dl>
    <dt> <b>Parameters:</b>
    <dd> resourceName - The name of the archive resource containing
				files for this unit.  Doubles as the name of
                            this component.
  </dl></dd>
</dl>
<a name="FileUnit(java.lang.String, java.lang.String, java.lang.String)"><img src="images/yellow-ball.gif" width=12 height=12 alt=" o "></a>
<b>FileUnit</b>
<pre>
 public FileUnit(String resourceName,
                 String installDirKey,
                 String relativePath)
</pre>
<dl>
  <dd> Create a FileUnit that reads from the specified resource
 section in the archive, which installs to the specified
 relative path offset from the directory specified by the
 installDirKey value.
<p>
  <dd><dl>
    <dt> <b>Parameters:</b>
    <dd> resourceName - The name of the archive resource containing
				files for this unit.
    <dd> installDirKey - The WizardState key that references a String
				object indicating where this FileUnit should be
				installed.  If this path is relative, the parent's
                       path is appended.  Otherwise, it is not.
    <dd> relativePath - The relative path from the directory specified
				by the DirectorySelectionPanel where this unit
				will install its contents.
  </dl></dd>
</dl>
<a name="methods"></a>
<h2>
  <img src="images/methods.gif" width=151 height=38 alt="Methods">
</h2>
<a name="refresh(java.util.Vector, java.lang.String)"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="refresh"><b>refresh</b></a>
<pre>
 public boolean refresh(Vector targets,
                        String sharedPoolKey)
</pre>
<dl>
  <dd> Update this  file.  For the FileUnit, the files are read out of the
 archive and their sizes updated against what is already installed.  This
 is a relatively expensive operation in terms of I/O requirements.
<p>
  <dd><dl>
    <dt> <b>Parameters:</b>
    <dd> targets - The target properties (set via <code>setProperty()</code>) to update.
    <dd> sharedPoolKey - the key to use during shared pooling.
    <dt> <b>Returns:</b>
    <dd> <code>true</code> if the refresh was sucessful, <code>false</code>otherwise.
    <dt> <b>Overrides:</b>
    <dd> <a href="com.sun.install.products.InstallComponent.html#refresh(java.util.Vector, java.lang.String)">refresh</a> in class <a href="com.sun.install.products.InstallComponent.html#_top_">InstallComponent</a>
  </dl></dd>
</dl>
<a name="initialize(com.sun.wizards.core.WizardState)"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="initialize"><b>initialize</b></a>
<pre>
 public boolean initialize(<a href="com.sun.wizards.core.WizardState.html#_top_">WizardState</a> state)
</pre>
<dl>
  <dd> Initialize the FileUnit by removing the alternate root.
<p>
  <dd><dl>
    <dt> <b>Parameters:</b>
    <dd> state - The WizardState.
    <dt> <b>Returns:</b>
    <dd> true if the initialization was successful; false otherwise.
    <dt> <b>Overrides:</b>
    <dd> <a href="com.sun.install.products.InstallComponent.html#initialize(com.sun.wizards.core.WizardState)">initialize</a> in class <a href="com.sun.install.products.InstallComponent.html#_top_">InstallComponent</a>
  </dl></dd>
</dl>
<a name="getInstallLocation()"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="getInstallLocation"><b>getInstallLocation</b></a>
<pre>
 public String getInstallLocation()
</pre>
<dl>
  <dd> Form the install location based on the installDirKey and a 
 possible relative path.  Althernate root is not considered in this method.
<p>
  <dd><dl>
    <dt> <b>Returns:</b>
    <dd> The location this FileUnit will install to
    <dt> <b>Overrides:</b>
    <dd> <a href="com.sun.install.products.InstallComponent.html#getInstallLocation()">getInstallLocation</a> in class <a href="com.sun.install.products.InstallComponent.html#_top_">InstallComponent</a>
  </dl></dd>
</dl>
<a name="readDestinationTable()"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="readDestinationTable"><b>readDestinationTable</b></a>
<pre>
 public void readDestinationTable()
</pre>
<dl>
  <dd> sets the destination table that is used for disk space checking.
 called by refresh() with a rule of "destinationTable"
<p>
</dl>
<a name="getCollection()"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="getCollection"><b>getCollection</b></a>
<pre>
 public <a href="com.sun.wizards.builder.resolver.ResourceCollection.html#_top_">ResourceCollection</a> getCollection()
</pre>
<dl>
  <dd> Retrieves the vector of files this unit will write into the archive, along
 with each file's attributes.
<p>
  <dd><dl>
    <dt> <b>Returns:</b>
    <dd> The data table representing the files this FileUnit will
     write into the archive
  </dl></dd>
</dl>
<a name="getComponentDescription()"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="getComponentDescription"><b>getComponentDescription</b></a>
<pre>
 public <a href="com.sun.wizards.registry.ComponentDescription.html#_top_">ComponentDescription</a> getComponentDescription()
</pre>
<dl>
  <dd> Gets the component's description.
<p>
  <dd><dl>
    <dt> <b>Returns:</b>
    <dd> The ComponentDescription object associated with this FileUnit.
    <dt> <b>Overrides:</b>
    <dd> <a href="com.sun.install.products.InstallComponent.html#getComponentDescription()">getComponentDescription</a> in class <a href="com.sun.install.products.InstallComponent.html#_top_">InstallComponent</a>
  </dl></dd>
</dl>
<a name="setFileTable(java.util.Vector)"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="setFileTable"><b>setFileTable</b></a>
<pre>
 public boolean setFileTable(Vector fileTable)
</pre>
<dl>
  <dd> Sets the table of files to be written into the archive at buildtime.
 The passed-in table is checked for sanity and is discarded in the event
 the table is not in the correct form.
<p>
  <dd><dl>
    <dt> <b>Parameters:</b>
    <dd> fileTable - the filetable to set into this FileUnit.
    <dt> <b>Returns:</b>
    <dd> true if the fileTable was sucessfully checked and set into this
   fileleaf.  false otherwise.
  </dl></dd>
</dl>
<a name="install(com.sun.wizards.core.WizardState)"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="install"><b>install</b></a>
<pre>
 public boolean install(<a href="com.sun.wizards.core.WizardState.html#_top_">WizardState</a> state)
</pre>
<dl>
  <dd> Install the files that are embedded in the wizard archive.
<p>
  <dd><dl>
    <dt> <b>Parameters:</b>
    <dd> state - The wizard state.
    <dt> <b>Returns:</b>
    <dd> Whether the install was successful or not.
    <dt> <b>Overrides:</b>
    <dd> <a href="com.sun.install.products.InstallComponent.html#install(com.sun.wizards.core.WizardState)">install</a> in class <a href="com.sun.install.products.InstallComponent.html#_top_">InstallComponent</a>
  </dl></dd>
</dl>
<a name="mkdirs(java.util.Vector, java.io.File)"><img src="images/green-ball.gif" width=12 height=12 alt=" o "></a>
<a name="mkdirs"><b>mkdirs</b></a>
<pre>
 public static void mkdirs(Vector result,
                           File directory)
</pre>
<dl>
  <dd> Recursively makes directories, registering each directory with the supplied vector so that it
 gets removed at uninstall time.
<p>
  <dd><dl>
    <dt> <b>Parameters:</b>
    <dd> result - The vector to add the created directories to.  The directories are inserted
		at the beginning of the vector as they are made.
    <dd> directory - The desired directory to be made.
  </dl></dd>
</dl>
<a name="uninstall(com.sun.wizards.core.WizardState)"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="uninstall"><b>uninstall</b></a>
<pre>
 public boolean uninstall(<a href="com.sun.wizards.core.WizardState.html#_top_">WizardState</a> state)
</pre>
<dl>
  <dd> Uninstall this Leaf.  This is run by the uninstaller at uninstall
 time and has no information about where the install actually took
 place.  Hence, it must guess the install directory.  The only guess
 is the directory specified at buildtime (the default install directory)
<p>
  <dd><dl>
    <dt> <b>Parameters:</b>
    <dd> state - The WizardState.
    <dt> <b>Returns:</b>
    <dd> Whether the uninstall was sucessful or not.
    <dt> <b>Overrides:</b>
    <dd> <a href="com.sun.install.products.InstallComponent.html#uninstall(com.sun.wizards.core.WizardState)">uninstall</a> in class <a href="com.sun.install.products.InstallComponent.html#_top_">InstallComponent</a>
  </dl></dd>
</dl>
<a name="addFile(java.lang.String, java.lang.String, java.util.Hashtable)"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="addFile"><b>addFile</b></a>
<pre>
 public void addFile(String path,
                     String fileName,
                     Hashtable forcedPermissions)
</pre>
<dl>
  <dd> Adds the specified file or directory to the resource.
<p>
  <dd><dl>
    <dt> <b>Parameters:</b>
    <dd> path - The path to the desired file to be added.
		 The <code>path</code>argument will not be remembered.
    <dd> filename - The name of the desired file/directory to be added.
             If filename is a directory, this method will recursively
		 add all files in that directory,
             and the files will be laid down in the same relative directories
             as when collected.
    <dd> forcedPermissions - A hashtable consisting of filenames and
      the desired permissions or <code>null</code> if no forced
      permissions should be appliet..  These permissions will
      override any other permissions for this file at
      install-time.  The filenames should be specified relative
      the the supplied path parameter.
  </dl></dd>
</dl>
<a name="resolveResource(java.lang.String, java.lang.String, byte[])"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="resolveResource"><b>resolveResource</b></a>
<pre>
 public <a href="com.sun.wizards.builder.resolver.ResourceInputStream.html#_top_">ResourceInputStream</a> resolveResource(String type,
                                            String name,
                                            byte extData[])
</pre>
<dl>
  <dd> This method resolves the resources required by this FileUnit.
 It either generates a stream for the list of names for the
 "names" resource entry, or a stream for the actual contents of
 this file unit.
<p>
  <dd><dl>
    <dt> <b>Parameters:</b>
    <dd> type - The type of resource to resolve.  This can be
			"Class", "Image", "Audio" or any other description.
    <dd> name - The name of the resource to resolve.
    <dd> extData - Extra data to be associated with the resource.  For
		FileUnit, the extra data contains the file permissions.
  </dl></dd>
</dl>
<a name="toString()"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="toString"><b>toString</b></a>
<pre>
 public String toString()
</pre>
<dl>
  <dd> Represent this object as a string.
<p>
  <dd><dl>
    <dt> <b>Returns:</b>
    <dd> A description of this object.
    <dt> <b>Overrides:</b>
    <dd> <a href="com.sun.install.products.InstallComponent.html#toString()">toString</a> in class <a href="com.sun.install.products.InstallComponent.html#_top_">InstallComponent</a>
  </dl></dd>
</dl>
<a name="addRuntimeResources(java.util.Vector)"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="addRuntimeResources"><b>addRuntimeResources</b></a>
<pre>
 public void addRuntimeResources(Vector resourceVector)
</pre>
<dl>
  <dd> Add the runtime resources required by this class.
<p>
  <dd><dl>
    <dt> <b>Parameters:</b>
    <dd> resourceVector - The vector containing all of the required resources
                       for this class
    <dt> <b>Overrides:</b>
    <dd> <a href="com.sun.install.products.InstallLeaf.html#addRuntimeResources(java.util.Vector)">addRuntimeResources</a> in class <a href="com.sun.install.products.InstallLeaf.html#_top_">InstallLeaf</a>
  </dl></dd>
</dl>
<hr>
<pre>
<a href="packages.html">All Packages</a>  <a href="tree.html">Class Hierarchy</a>  <a href="Package-com.sun.install.products.html">This Package</a>  <a href="com.sun.install.products.FileServerObject.html#_top_">Previous</a>  <a href="com.sun.install.products.InstallArchiveWriter.html#_top_">Next</a>  <a href="AllNames.html">Index</a></pre>
</body>
</html>
